# 第十章 字符串
## 一、字符串
1. **定义**
   - `char word[] = {'H','e','l','l','o','!','\0'};`
     | 数组 | 字符 | 
     | :--: | :--: |
     | word[0] | H |
     | word[1] | e |
     | …… | …… |
     | word[6] | \0 |
   - 以`'\0'`结尾的一串字符
   - 0不包含在字符串长度中
   - 字符串以数组的形式存在，以数组或指针的形式访问
2. **字符串变量**
   - `char *str = "Hello";`
   - `char word[] = "Hello";`
   - `char line[10] = "Hello";  //  长度为六`
3. **字符串常量**
   - `"常量"`
   - s是一个指针，初始化为指向一个字符串常量
   - 由于常量的地址为只读地址，所以s是`const char *s`
   - 对s所指的字符串做写入会导致程序崩溃
   - 如要修改字符串，用数组形式修改
   <font face="楷体" color=red>构造字符串：使用数组   
   处理字符串：指针 </font>
## 二、字符串输入输出
1. **字符串赋值**
   - `char *t = "title";`
   - `char *s;`
   - `s = t;    //  s = "title"`
2. **字符串输入输出**
   - `scanf`读入一个单词（到空格、TAB、回车为止）
   - `scanf`是不安全的，因为不知道读入内容的长度，可能导致数组越界<font color=red>（解决方案：`scanf("%7s", s);`）</font> 
3. **字符串数组**
   - `char s[][];`
## 三、单字符串输入输出
1. **putchar**
   - `int putchar(int c);`
   - 向标准输出写==一个==字符
   - 返回写了几个字符，EOF（-1）表示写失败  
2. **getchar**
   - `int getchar(void);`
   - 从标准输出读入一个字符
   - 返回类型是`int`是因为要返回EOF
## 四、字符串函数
1. `strlen`
   - `size_t strlen(const char *s);`
   - 返回s字符串的长度（不包括结尾的0） 
2. `strcmp`
   - `int strcmp(const char *s1, const char *s2);`
   - 比较两个字符串，返回ASCII表的差值：
     - 0：`s1 == s2`
     - 正数：`s1 > s2`
     - 负数：`s1 < s2`
   - a < z, A < a   
3. `strcpy`
   - `char * strcpy(char *restrict dst, const char *restrict src);   // dst-destination, src-source` 
   - 将src的字符串拷贝到dst
     - restrict表明src和dst不重叠
   - 返回dst
     - 为了能链接起代码
   - **复制一个字符串**
    ```c
    char *dst = (char*)malloc(strlen(src) + 1);
    strcpy(dst, src);
    ```       
4. **单个字符搜索函数**
   - `char * strchr(const char *s, int c);   // 在字符串s中寻找c第一次出现的位置`
   - `char * strrchr(const char *s, int c);  // 从右往左寻找`
   - 返回NULL表示没有找到
   - 如果同时出现多个字母该如何搜索？
     ```c
     char s[] = "Hello";   // 想要寻找第二个'l'
     char *p = strchr(s, 'l');
     p = strchr(p + 1, 'l');  // 进行迭代并移动指针
     printf("%s\n", p);
     ```
   - 如果想要寻找字符前的字符串
     ```c
     char s[] = "Hello";   // 想要输出"He"
     char *p = strchr(s, 'l');   // 找到"He"后面的第一个字符"l"
     char c = *p; // 临时储存第一个字符"l"
     *p = '\0';   // 将字符串s裁剪为"H", "e", "\0"
     char *t = (char*)malloc(strlen(s) + 1);
     strcpy(t, s);
     *p = c;   // 还原字符串s
     printf("%s", t);
     free(t); 
     ```   
5. **字符串搜索函数**
   - `char * strstr(const char *s1, const char *s2);`
   - `char * strcasestr(const char *s1, const char *s2); // 忽略大小写`